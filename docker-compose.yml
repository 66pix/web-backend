test:
    build: .
    dockerfile: test/Dockerfile
    environment:
        PORT: 3000
        TOKEN_SECRET: "this is a secret"
        RESET_PASSWORD_TOKEN_SECRET: "this is a reset password secret"
        NODE_ENV: "development"
        RDS_PORT: "5432"
        RDS_USERNAME: "docker"
        RDS_PASSWORD: ""
        RDS_HOSTNAME: "postgres"
        RDS_DB_NAME: "test"
        EMAIL_HOST: "localhost"
        EMAIL_PASSWORD: "email password"
        EMAIL_USERNAME: "email username"
        EMAIL_PORT: 1231
        EMAIL_FROM: "testing@66pix.com"
        AWS_S3_KEY: "fake-key"
        AWS_S3_SECRET: "fake-secret"
        AWS_S3_BUCKET: "fake-bucket"
        AWS_S3_REGION: "ap-southeast-2"
        CDN_URL: "//cdn.images.staging.66pix.com"
    links:
        - postgres
    volumes:
        - .:/srv/www
    dns:
        - 8.8.8.8
        - 9.9.9.9

postgres:
    image: postgres
    ports:
        - "5342"
    environment:
        POSTGRES_USER: "docker"


